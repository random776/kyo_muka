# kyo_muka
pythonとLine notify apiを用いて、東京大学教養学部の教務課のお知らせを10分に1回定点観測するツールです。
## 仕様
### 各ファイルの紹介
- main.py：東京大学教養学部の教務課ホームページ https://www.c.u-tokyo.ac.jp/zenki/index.html の「お知らせ」欄の変化を感知し、Line notify経由で伝達します。
- sub.py：main.pyの機能を、timeやscheduleモジュールを用いて、継続的に実行するための装置です。
- old_elem.xlsx：本ツールのデータベース部分です。このデータを鋳型としてmain.pyによって取得されたデータと比較し、変化を読み取ります。
### 使用方法
注) pythonの実行環境の設定はご自分で行ってください。
1. Line notify apiのホームページ https://notify-bot.line.me/doc/ja/ を開き、Line notify api のアクセストークンを発行します。発行方法は https://qiita.com/iitenkida7/items/576a8226ba6584864d95 などを参照するとわかりやすいと思います。トークンを発行したら、指定したグループに「Line notify」を招待します。
2. main.py に```'Authorization': 'Bearer ラインnotify api のトークン'```と書いてある場所があります。発行したトークンをコピーして、`ラインnotify api のトークン`の部分に貼り付けてください。
3. ご自分の実行環境で sub.py を実行してください。ホームページ更新時に次のような表示が出ます（ホームページが更新されていなければ、Line側に通知は来ません）。

![image](https://user-images.githubusercontent.com/125573400/231678976-3a74173f-898c-4caf-b577-42b4be1e28b1.png)

### 使用上の注意
- sub.pyで`time.sleep(600)`という部分がありますが、これは「600秒に1回サイトにアクセスする」ことを意味するので、ここを取り除いたり、カッコ内を1秒以下にしたりすると、アクセス過多でサイトに害を及ぼす可能性があるので注意です。
- 本モジュールが機能するのは、実行環境のPCが起動中の時のみです。PCをスリープモードにすると機能が一時停止します(スリープモードを解除すると機能が復活します)。

## なぜこんなものが必要なのか
東京大学教養学部の教務課は、基本的に連絡事項をホームページで確認し忘れても自己責任だとする姿勢です。これに対処するため、ホームページを定点観測できるようにして、チェックし忘れを防ぐことができます。
